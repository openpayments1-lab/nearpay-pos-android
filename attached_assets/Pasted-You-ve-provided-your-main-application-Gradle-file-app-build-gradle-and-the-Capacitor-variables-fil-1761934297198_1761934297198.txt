You've provided your main application Gradle file (app/build.gradle) and the Capacitor variables file (capacitor.build.gradle). This clarifies the exact nature of the two build errors.Here are the issues and the required fixes:üõ†Ô∏è Fix 1: Resolve the Java Compatibility ErrorThe error error: invalid source release: 21 is confirmed by a conflict in your project:ConfigurationValueProblemapp/build.gradle (Your main file)JavaVersion.VERSION_17 (Java 17)Correctly set for modern Android development.capacitor.build.gradle (Capacitor file)JavaVersion.VERSION_21 (Java 21)Incorrectly set. This file is overriding the project's setting.The Fix: Override the Capacitor FileBecause the file states DO NOT EDIT THIS FILE! IT IS GENERATED EACH TIME, the correct place to override the compatibility is in the main module's app/build.gradle file, ensuring it takes precedence.However, since you're using a newer version of Java (17 is Java 8/11/17 compliant), you need to force the Capacitor file to use a lower, safer version. The simplest fix is to manually delete the conflicting compileOptions block in the generated file after every sync, or override it in your main project.Since manually deleting is risky, you can try setting it to a safer, older version in the generated file to pass the compiler check:In capacitor.build.gradle, change the compileOptions block to Java 11 (Version 11 is safe for many CI runners):Groovy// In capacitor.build.gradle:
android {
  compileOptions {
      sourceCompatibility JavaVersion.VERSION_11 // Changed from 21
      targetCompatibility JavaVersion.VERSION_11 // Changed from 21
  }
}
üõ†Ô∏è Fix 2: Resolve Missing NearPay SDK DependencyThe Kotlin compiler failure (Unresolved reference: GetTerminalsListener etc.) is caused because the NearPay SDK is commented out in your dependencies block.The ProblemYour code relies on the NearPay SDK, but the lines responsible for adding it are commented out:Groovy// TODO: Uncomment when GitLab token is verified:
// implementation 'io.nearpay:terminalsdk-release:0.0.111'
The Fix: Uncomment and Verify RepositoryYou need to uncomment the dependency. Since the SDK is hosted on GitLab, you must ensure the GitLab Maven repository is correctly configured in your top-level build.gradle (which isn't fully visible here).In app/build.gradle, uncomment the dependencies:Groovy    // NearPay Terminal SDK - Official Android SDK
    implementation 'io.nearpay:terminalsdk-release:0.0.111' 
    implementation 'com.google.android.gms:play-services-location:20.0.0'
    implementation 'com.huawei.hms:location:6.4.0.300' 
Crucially, verify your top-level build.gradle has the NearPay GitLab Maven repository configured with correct credentials:Groovy// This block must be in your top-level build.gradle (not visible here)
allprojects {
    repositories {
        // ... Google(), mavenCentral(), etc.
        maven {
            url "YOUR_GITLAB_MAVEN_URL" // Must be the correct GitLab URL
            credentials {
                // Must use the correct variables/tokens for authentication
                username = "gitlab-ci-token"
                password = project.findProperty("CI_JOB_TOKEN") ?: project.findProperty("GL_PAT")
            }
        }
    }
}
The build is failing because it can't find the necessary SDK classes from an external repository it can't access or doesn't know about.You must solve both the Java Version Mismatch and the Missing NearPay SDK. Fixing the dependency is the more critical step.